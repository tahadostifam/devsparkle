<div class="container" style="top: 0">
    <div id="view_article">
       <% if @article.present? %>
            <div class='article_box'>
            <div style="display: block; width: 100%; margin-bottom: 10px;">
                <h1 class='title' dir="rtl" style="margin-bottom: 10px;"><%= @article.header %></h3>
                <div style="display: flex; justify-content: space-between;">
                    <div>
                        <% if show_actions %>
                            <%= link_to 'حذف', '/articles/confirm_delete_article/' + @article.slug, :style => 'display: inline-block', :class => 'link link-danger' %>
                            <%= link_to 'ویرایش', '/dashboard/edit_article/' + @article.slug, :style => 'margin-left: 10px; display: inline-block', :class => 'link' %>
                        <% end %>
                    </div>
                    <div>
                        <% if session[:user] != nil %>
                            <%= form_with url: {:controller => :likes, :action => :toggle_like} do |f| %>
                                <input type="hidden" name="slug" value="<%= @article.slug %>">
                                <button type="submit" class="like_button">
                                    <% if @article.liked(session[:user][:id]) %>
                                        <span class="article_icon_span link-danger" dir="ltr">
                                            <span class='icon'>
                                                <ion-icon name='heart'></ion-icon>
                                            </span>
                                            <%= @article.likes.length %>
                                        </span>
                                    <% else %>
                                        <span class="article_icon_span" dir="ltr">
                                            <span class='icon'>
                                                <ion-icon name='heart'></ion-icon>
                                            </span>
                                            <%= @article.likes.length %>
                                        </span>
                                    <% end %>
                                </button>
                            <% end %>
                        <% else %>
                            <span class="article_icon_span" dir="ltr">
                                <span class='icon'>
                                    <ion-icon name='heart'></ion-icon>
                                </span>
                                <%= @article.likes.length %>
                            </span>
                        <% end %>
                        <span class="article_icon_span" dir="ltr">
                            <span class='icon'>
                                <ion-icon name='calendar-outline'></ion-icon>
                            </span>
                            <%= @article.published_time %>
                        </span>
                    </div>
                </div>
            </div>
            <div class='image cover'>
                <%= image_tag @article.image, :onload => 'imagePreloader(this)' %>
            </div>
            <div class="content md_to_html" style="margin: 10px 0;" dir="rtl">
                <%= @article.content %>
            </div>
            <div class="author_row">
                <div class="icon">
                    <ion-icon name="person-outline"></ion-icon>
                </div>
                <div class="value">
                    <%= @article.user.full_name %>
                </div>
            </div>
        </div>
        <% else %>
            <span style='color: #777; font-size: 17px; width: 100%; display: block; text-align: center; padding: 20px 0'>مقاله مورد نظر پیدا نشد.</span>
        <% end %>
    </div>
</div>